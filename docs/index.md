# Автоматическая загрузка

Класс _Loader_ реализует механизм автоматической загрузки классов и ресурсов 
используя три основных подхода:

1. Разрешение пути используя имя ресурса как полный адрес до файла
2. Разрешение пути используя карту
3. Разрешение пути используя префикс

Первый подход наиболее простой. Предполагается что файл с ресурсом можно 
вычислить по имени самого ресурса. Он используется, если адрес файла с ресурсом 
невозможно получить спомощью двух других подходов.

```php
$loader = new Loader;
$obj = new \Lib\Classes\MyClass; // Предполагается что класс находится в файле
                                 // Lib/Classes/MyClass.php
```

Второй подход наименее ресурсоемкий, так как загрузчику не требуется вычислять 
адрес файла ресурса. Для формирования карты соответствий используется метод 
_map_, который принимает имя ресурса и полный адрес до файла, его содержащего.

```php
$loader = new Loader;
$loader->map('Vendor\Framework\App', 'vendor\fw\App.php');
$obj = new \Vendor\Framework\App;
```

Третий подход объединяет логику первого и второго, что позволяет указать лишь 
адрес каталога, в котором необходимо найти требуемый файл ресурса. Реализуется 
это благодаря перечислению префиксов с помощью метода _pref_.

```php
$loader = new Loader;
$loader->pref('tests', 'tests/lib');
$obj = new \tests\Mock.php; // Предполагается что класс находится в файле
                            // tests/lib/Mock.php
```

## Загрузка данных

Если необходимо загрузить ресурс, отличный от PHP класса, можно воспользоваться 
методом _load_, который принимает в качестве параметра имя целевого ресурса
и вычисляет адрес файла используя три описанных выше подхода. В качестве 
ресурса, в таком случае, должен выступать PHP скрипт использующий `return` для 
формирования данных.

```php
// Файл app/conf/db_conf.php
return [
  'host' => 'localhost',
  'db' => 'mydb',
  'user' => 'root',
  'pass' => 'root',
];
```

```php
$loader = new Loader;
$loader->pref('conf', 'app/conf');
$template = $loader->load('conf\db_conf');
```
